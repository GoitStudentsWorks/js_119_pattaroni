import{a as g,S as I,i as p,P as B}from"./assets/vendor-WtVtfYKs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const M={BASE_URL:"https://sound-wave.b.goit.study/api",ENDPOINTS:{genres:()=>"/genres",artists:()=>"/artists",artistById:e=>`/artists/${e}`,artistByIdWithAlbums:e=>`/artists/${e}/albums`,feedbacks:()=>"/feedbacks"},PER_PAGE:8},{BASE_URL:x,ENDPOINTS:L,PER_PAGE:h}=M;g.defaults.baseURL=x;const T=async()=>{const{data:e}=await g.get(L.genres());return e},E=async({page:e=1,genre:t,name:n,sortName:a}={})=>{const{data:r}=await g.get(L.artists(),{params:{page:e,limit:h,...!!t&&{genre:t},...!!n&&{name:n},...!!a&&{sortName:a}}}),i=r.totalArtists||0,o=Math.ceil(i/h),m=e>=o;return{artists:r.artists||[],isLastPage:m,totalItems:i,perPage:h}},F=async(e=1,t=10)=>{const{data:n}=await g.get(L.feedbacks(),{params:{page:e,limit:t}}),a=n.data||[],r=n.total||0,i=e>=Math.ceil(r/t);return{feedbacks:a,isLastPage:i}},s={artistsList:document.querySelector(".artists-list"),containerEL:document.querySelector(".container"),loader:document.querySelector(".loader"),artistsPagination:document.querySelector("#artists-pagination"),feedbackContainer:document.querySelector(".section-feedback .container"),genreSelect:document.querySelector("#genre-select"),sortSelect:document.querySelector("#sort-select"),searchInput:document.querySelector(".filters-search-input"),searchBtn:document.querySelector(".filters-search-btn"),resetBtn:document.querySelector(".filters-reset-btn"),emptyResetBtn:document.querySelector(".empty-reset-btn"),toggleBtn:document.querySelector(".filters-toggle-btn"),filtersWrapper:document.querySelector(".filters-wrapper"),artistsLoader:document.querySelector(".artists-loader")},u="/project-Dev4L1fe/assets/sprite-BCLXoa-8.svg",N=(e="")=>CSS.supports("-webkit-line-clamp","2")&&CSS.supports("display","-webkit-box")?e:e.length>80?e.slice(0,80).trim()+"...":e,l={create(e){if(!e)return;let t=e.querySelector(".loader");return t||(e.insertAdjacentHTML("beforeend",'<span class="loader hidden"></span>'),t=e.querySelector(".loader")),{loaderEl:t,parent:e}},show({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.remove("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="flex",e?.classList.remove("hidden")))},hide({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.add("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="none",e?.classList.add("hidden")))}},C=({page:e,visiblePages:t,itemsPerPage:n,totalItems:a}={})=>({totalItems:a,itemsPerPage:n,page:e,visiblePages:t,centerAlign:!0,usageStatistics:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:({type:r})=>`<a href="#" class="tui-page-btn tui-${r}"><svg class="pagination-${r==="next"?"right":"left"}-icon"><use href="${u}#${r==="next"?"right":"left"}-arrow-icon"></use></svg></a>`,disabledMoveButton:({type:r})=>`<span class="tui-page-btn tui-is-disabled tui-${r}"><svg class="icon-disabled pagination-${r==="next"?"right":"left"}-icon"><use href="${u}#${r==="next"?"right":"left"}-arrow-icon"></use></svg></span>`,moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}),O=e=>e<768?3:e>=768&&e<1440?4:5;function P(e){s.artistsList.innerHTML=e.map(t=>{const n=t.genres.map(r=>`<li class="genres-list-item">${r}</li>`).join(""),a=N(t.strBiographyEN);return`<li class="artists-list-item" data-id="${t._id}">
        <img class="artist-image" src="${t.strArtistThumb}" alt="${t.strArtist}" />
        <ul class="genres-list">${n}</ul>
        <h3 class="artist-name">${t.strArtist}</h3>
        <p class="artist-descr">${a}</p>
        <button type="button" class="artist-btn-learn-more">
          <span>Learn More</span>
          <span>
            <svg class="artist-learn-svg" width="14" height="14">
              <use href="${u}#next-icon"></use>
            </svg>
          </span>
        </button>
      </li>`}).join("")}const D=e=>{const t=document.querySelector(".section-feedback .container");if(!t)return console.error("Container not found");const n=`
    <div class="feedback-slider swiper">
      <div class="swiper-wrapper">
        ${e.map(o=>`
          <div class="swiper-slide">
            <div class="feedback-card">
              <div class="stars">${j(o.rating)}</div>
              <p class="comment">"${o.descr}"</p>
              <h3 class="comm-name">${o.name}</h3>
            </div>
          </div>
        `).join("")}
      </div>
      <div class="swiper-button-prev">
        <svg class="icon">
          <use href="${u}#left-arrow-icon"></use>

        </svg>
      </div>
      <div class="swiper-button-next">
        <svg class="icon">
          <use href="${u}#right-arrow-icon"></use>

        </svg>
      </div>
      <div class="custom-pagination">
        <span class="bullet bullet-left"></span>
        <span class="bullet bullet-middle"></span>
        <span class="bullet bullet-right"></span>
      </div>
    </div>
  `;t.insertAdjacentHTML("beforeend",n);const a=t.querySelector(".feedback-slider");if(!a)return console.error("Swiper container not found");const r=new I(a,{spaceBetween:30,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init(o){i(o)},slideChange(o){i(o)}}});document.querySelector(".swiper-button-next")?.addEventListener("click",()=>{r.slideNext()}),document.querySelector(".swiper-button-prev")?.addEventListener("click",()=>{r.slidePrev()});function i(o){const m=o.slides.length,q=o.activeIndex,f=o.el.querySelector(".bullet-left"),v=o.el.querySelector(".bullet-middle"),y=o.el.querySelector(".bullet-right");!f||!v||!y||(f.classList.remove("active"),v.classList.remove("active"),y.classList.remove("active"),q===0?f.classList.add("active"):q===m-1?y.classList.add("active"):v.classList.add("active"))}};function j(e){const t=Math.round(e),n=5-t;return'<span class="stars">'+'<span class="fa fa-star checked"></span>'.repeat(t)+'<span class="fa fa-star" style="color: #fff;"></span>'.repeat(n)+"</span>"}async function R(){async function e(t=1){const n=l.create(s.artistsLoader);l.show(n),s.artistsLoader.style.display="flex";try{const a=await E({page:t});$(a.totalItems,a.perPage),P(a.artists)}catch(a){a.response?p.error({message:`Error ${a.response.status}: ${a.response.data}`}):p.error({message:`Error: ${a.message}`})}finally{l.hide(n),s.artistsLoader.style.display="none",document.querySelector(".artists-subtitle").scrollIntoView({behavior:"smooth"})}}await e(1)}async function H(){const e=l.create(s.feedbackContainer);l.show(e);try{const{feedbacks:t}=await F(1,10);if(!Array.isArray(t))throw new Error("Feedbacks is not an array");D(t)}catch(t){console.error("Feedback fetch error:",t)}finally{l.hide(e)}}let c={genre:"",sortName:"",name:"",page:1};async function W(){await V(),G()}async function V(){try{const t=(await T()).map(n=>`<option value="${n.genre}">${n.genre}</option>`).join("");s.genreSelect.innerHTML='<option value="" disabled selected hidden>Genre</option>'+t}catch(e){p.error({message:"Failed to load genres"}),console.error(e)}}function G(){s.genreSelect.addEventListener("change",()=>{c.genre=s.genreSelect.value,c.page=1,d()}),s.sortSelect.addEventListener("change",()=>{const e=s.sortSelect.value;c.sortName=e==="az"?"asc":e==="za"?"desc":"",c.page=1,d()}),s.searchBtn.addEventListener("click",e=>{e.preventDefault(),c.name=s.searchInput.value.trim(),c.page=1,d()}),s.searchInput.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),c.name=s.searchInput.value.trim(),c.page=1,d())}),s.resetBtn.addEventListener("click",()=>{s.genreSelect.value="",s.sortSelect.value="",s.searchInput.value="",c={genre:"",sortName:"",name:"",page:1},d()}),s.emptyResetBtn&&s.emptyResetBtn.addEventListener("click",()=>{s.genreSelect.value="",s.sortSelect.value="",s.searchInput.value="",c={genre:"",sortName:"",name:"",page:1},document.querySelector(".artists-empty-state").classList.add("is-hidden"),d()}),s.toggleBtn&&s.filtersWrapper&&s.toggleBtn.addEventListener("click",()=>{s.filtersWrapper.classList.toggle("is-open");const e=s.toggleBtn.getAttribute("aria-expanded")==="true";s.toggleBtn.setAttribute("aria-expanded",String(!e))})}let k=null;async function d(){const e=l.create(s.artistsLoader);l.show(e);try{const t=await E(c);if(!t||!Array.isArray(t.artists))throw new Error("Invalid API response structure");t.artists.length===0?(s.artistsList.innerHTML="",document.querySelector(".artists-empty-state").classList.remove("is-hidden"),s.artistsPagination.innerHTML=""):(document.querySelector(".artists-empty-state").classList.add("is-hidden"),P(t.artists),$(t.totalItems,t.perPage))}catch{p.error({message:"Failed to load filtered artists"})}finally{l.hide(e),s.artistsLoader.style.display="none",document.querySelector(".artists-subtitle").scrollIntoView({behavior:"smooth"})}}function $(e,t){let n=window.innerWidth;k=new B(s.artistsPagination,C({page:c.page,visiblePages:O(n),itemsPerPage:t,totalItems:e})),k.on("afterMove",a=>{c.page=a.page,d()})}const b=document.getElementById("toTop");window.addEventListener("scroll",()=>{window.scrollY>600?b.classList.add("show"):b.classList.remove("show")});b.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const U=document.querySelector(".burger-menu"),A=document.querySelector(".mobile-menu"),_=document.querySelector(".mobile-menu-close"),S=document.querySelector(".overlay"),z=document.querySelectorAll(".nav-list-m a");function K(){A.classList.add("active"),S.classList.add("active"),document.body.classList.add("lock")}function w(){A.classList.remove("active"),S.classList.remove("active"),document.body.classList.remove("lock")}U.addEventListener("click",K);_.addEventListener("click",w);S.addEventListener("click",w);z.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const n=this.getAttribute("href"),a=document.querySelector(n);a&&a.scrollIntoView({behavior:"smooth"}),w()})});R();H();W();
//# sourceMappingURL=index.js.map
