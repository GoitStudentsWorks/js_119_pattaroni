import{a as h,S as x,i as y,P as $}from"./assets/vendor-WtVtfYKs.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const T={BASE_URL:"https://sound-wave.b.goit.study/api",ENDPOINTS:{genres:()=>"/genres",artists:()=>"/artists",artistById:t=>`/artists/${t}`,artistByIdWithAlbums:t=>`/artists/${t}/albums`,feedbacks:()=>"/feedbacks"},PER_PAGE:8},{BASE_URL:F,ENDPOINTS:E,PER_PAGE:w}=T;h.defaults.baseURL=F;const N=async()=>{const{data:t}=await h.get(E.genres());return t},M=async({page:t=1,genre:e,name:r,sortName:a}={})=>{const{data:s}=await h.get(E.artists(),{params:{page:t,limit:w,...!!e&&{genre:e},...!!r&&{name:r},...!!a&&{sortName:a}}}),i=s.totalArtists||0,n=Math.ceil(i/w),u=t>=n;return{artists:s.artists||[],isLastPage:u,totalItems:i,perPage:w}},C=async(t=1,e=10)=>{const{data:r}=await h.get(E.feedbacks(),{params:{page:t,limit:e}}),a=r.data||[],s=r.total||0,i=t>=Math.ceil(s/e);return{feedbacks:a,isLastPage:i}},c={artistsList:document.querySelector(".artists-list"),containerEL:document.querySelector(".container"),loader:document.querySelector(".loader"),artistsPagination:document.querySelector("#artists-pagination"),feedbackContainer:document.querySelector(".section-feedback .container"),artistsLoader:document.querySelector(".artists-loader")},g="/project-Dev4L1fe/assets/sprite-BCLXoa-8.svg",O=(t="")=>CSS.supports("-webkit-line-clamp","2")&&CSS.supports("display","-webkit-box")?t:t.length>80?t.slice(0,80).trim()+"...":t,l={create(t){if(!t)return;let e=t.querySelector(".loader");return e||(t.insertAdjacentHTML("beforeend",'<span class="loader hidden"></span>'),e=t.querySelector(".loader")),{loaderEl:e,parent:t}},show({loaderEl:t,parent:e}={}){!t||!e||(t?.classList.remove("hidden"),e===document.querySelector(".artists-loader")&&(e.style.display="flex"))},hide({loaderEl:t,parent:e}={}){!t||!e||(t?.classList.add("hidden"),e===document.querySelector(".artists-loader")&&(e.style.display="none"))}},D=({page:t,visiblePages:e,itemsPerPage:r,totalItems:a}={})=>({totalItems:a,itemsPerPage:r,page:t,visiblePages:e,centerAlign:!0,usageStatistics:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:({type:s})=>`<a href="#" class="tui-page-btn tui-${s}"><svg class="pagination-${s==="next"?"right":"left"}-icon"><use href="${g}#${s==="next"?"right":"left"}-arrow-icon"></use></svg></a>`,disabledMoveButton:({type:s})=>`<span class="tui-page-btn tui-is-disabled tui-${s}"><svg class="icon-disabled pagination-${s==="next"?"right":"left"}-icon"><use href="${g}#${s==="next"?"right":"left"}-arrow-icon"></use></svg></span>`,moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}),j=t=>t<768?3:t>=768&&t<1440?4:5;function I(t){c.artistsList.innerHTML=t.map(e=>{const r=e.genres.map(s=>`<li class="genres-list-item">${s}</li>`).join(""),a=O(e.strBiographyEN);return`<li class="artists-list-item">
        <img class="artist-image" src="${e.strArtistThumb}" alt="${e.strArtist}" />
        <ul class="genres-list">${r}</ul>
        <h3 class="artist-name">${e.strArtist}</h3>
        <p class="artist-descr">${a}</p>
        <button type="button" class="artist-btn-learn-more">
          <span>Learn More</span>
          <span>
            <svg class="artist-learn-svg" width="14" height="14">
              <use href="${g}#next-icon"></use>
            </svg>
          </span>
        </button>
      </li>`}).join("")}const H=t=>{const e=document.querySelector(".section-feedback .container");if(!e)return console.error("Container not found");const r=`
    <div class="feedback-slider swiper">
      <div class="swiper-wrapper">
        ${t.map(n=>`
          <div class="swiper-slide">
            <div class="feedback-card">
              <div class="stars">${R(n.rating)}</div>
              <p class="comment">"${n.descr}"</p>
              <h3 class="comm-name">${n.name}</h3>
            </div>
          </div>
        `).join("")}
      </div>
      <div class="swiper-button-prev">
        <svg class="icon">
          <use href="${g}#left-arrow-icon"></use>

        </svg>
      </div>
      <div class="swiper-button-next">
        <svg class="icon">
          <use href="${g}#right-arrow-icon"></use>

        </svg>
      </div>
      <div class="custom-pagination">
        <span class="bullet bullet-left"></span>
        <span class="bullet bullet-middle"></span>
        <span class="bullet bullet-right"></span>
      </div>
    </div>
  `;e.insertAdjacentHTML("beforeend",r);const a=e.querySelector(".feedback-slider");if(!a)return console.error("Swiper container not found");const s=new x(a,{spaceBetween:30,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init(n){i(n)},slideChange(n){i(n)}}});document.querySelector(".swiper-button-next")?.addEventListener("click",()=>{s.slideNext()}),document.querySelector(".swiper-button-prev")?.addEventListener("click",()=>{s.slidePrev()});function i(n){const u=n.slides.length,m=n.activeIndex,b=n.el.querySelector(".bullet-left"),L=n.el.querySelector(".bullet-middle"),S=n.el.querySelector(".bullet-right");!b||!L||!S||(b.classList.remove("active"),L.classList.remove("active"),S.classList.remove("active"),m===0?b.classList.add("active"):m===u-1?S.classList.add("active"):L.classList.add("active"))}};function R(t){const e=Math.round(t),r=5-e;return'<span class="stars">'+'<span class="fa fa-star checked"></span>'.repeat(e)+'<span class="fa fa-star" style="color: #fff;"></span>'.repeat(r)+"</span>"}async function G(){let t=null,e=window.innerWidth;async function r(s=1){const i=l.create(c.artistsLoader);l.show(i),c.artistsLoader.style.display="flex";try{const{artists:n,totalItems:u,perPage:m}=await M({page:s});I(n),t||a(u,m,s)}catch(n){n.response?y.error({message:`Error ${n.response.status}: ${n.response.data}`}):y.error({message:`Error: ${n.message}`})}finally{l.hide(i),c.artistsLoader.style.display="none",document.querySelector(".artists-subtitle").scrollIntoView({behavior:"smooth"})}}function a(s,i,n=1){t=new $(c.artistsPagination,D({page:n,visiblePages:j(e),itemsPerPage:i,totalItems:s})),t.on("afterMove",u=>{r(u.page)})}await r(1)}async function U(){const t=l.create(c.feedbackContainer);l.show(t);try{const{feedbacks:e}=await C(1,10);if(!Array.isArray(e))throw new Error("Feedbacks is not an array");H(e)}catch(e){console.error("Feedback fetch error:",e)}finally{l.hide(t)}}const f=document.querySelector("#genre-select"),v=document.querySelector("#sort-select"),p=document.querySelector(".filters-search-input"),V=document.querySelector(".filters-search-btn"),W=document.querySelector(".filters-reset-btn");let o={genre:"",sortName:"",name:"",page:1};async function z(){await _(),K(),d()}async function _(){try{const e=(await N()).map(r=>`<option value="${r.genre}">${r.genre}</option>`).join("");f.innerHTML='<option value="" disabled selected hidden>Genre</option>'+e}catch(t){y.error({message:"Failed to load genres"}),console.error(t)}}function K(){f.addEventListener("change",()=>{o.genre=f.value,o.page=1,d()}),v.addEventListener("change",()=>{const a=v.value;o.sortName=a==="az"?"asc":a==="za"?"desc":"",o.page=1,d()}),V.addEventListener("click",a=>{a.preventDefault(),o.name=p.value.trim(),o.page=1,d()}),p.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),o.name=p.value.trim(),o.page=1,d())}),W.addEventListener("click",()=>{f.value="",v.value="",p.value="",o={genre:"",sortName:"",name:"",page:1},d()});const t=document.querySelector(".empty-reset-btn");t&&t.addEventListener("click",()=>{f.value="",v.value="",p.value="",o={genre:"",sortName:"",name:"",page:1},document.querySelector(".artists-empty-state").classList.add("is-hidden"),d()});const e=document.querySelector(".filters-toggle-btn"),r=document.querySelector(".filters-wrapper");e&&r&&e.addEventListener("click",()=>{r.classList.toggle("is-open");const a=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",String(!a))})}let A=null;async function d(){const t=l.create(c.artistsList);l.show(t);try{const e=await M(o);if(!e||!Array.isArray(e.artists))throw new Error("Invalid API response structure");e.artists.length===0?(c.artistsList.innerHTML="",document.querySelector(".artists-empty-state").classList.remove("is-hidden"),c.artistsPagination.innerHTML=""):(document.querySelector(".artists-empty-state").classList.add("is-hidden"),I(e.artists),X(e.totalItems,e.perPage))}catch{y.error({message:"Failed to load filtered artists"})}finally{l.hide(t)}}function X(t,e){A=new $(c.artistsPagination,{totalItems:t,itemsPerPage:e,visiblePages:5,centerAlign:!0,page:o.page}),A.on("afterMove",r=>{o.page=r.page,d()})}const q=document.getElementById("toTop");window.addEventListener("scroll",()=>{window.scrollY>600?q.classList.add("show"):q.classList.remove("show")});q.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const Y=document.querySelector(".burger-menu"),B=document.querySelector(".mobile-menu"),J=document.querySelector(".mobile-menu-close"),k=document.querySelector(".overlay"),Q=document.querySelectorAll(".nav-list-m a");function Z(){B.classList.add("active"),k.classList.add("active"),document.body.classList.add("lock")}function P(){B.classList.remove("active"),k.classList.remove("active"),document.body.classList.remove("lock")}Y.addEventListener("click",Z);J.addEventListener("click",P);k.addEventListener("click",P);Q.forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();const r=this.getAttribute("href"),a=document.querySelector(r);a&&a.scrollIntoView({behavior:"smooth"}),P()})});G();U();z();
//# sourceMappingURL=index.js.map
