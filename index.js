import{a as S,S as V,i as L,P as G}from"./assets/vendor-WtVtfYKs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const Y={BASE_URL:"https://sound-wave.b.goit.study/api",ENDPOINTS:{genres:()=>"/genres",artists:()=>"/artists",artistById:e=>`/artists/${e}`,artistByIdWithAlbums:e=>`/artists/${e}/albums`,feedbacks:()=>"/feedbacks"},PER_PAGE:8},{BASE_URL:z,ENDPOINTS:w,PER_PAGE:q}=Y;S.defaults.baseURL=z;const K=async()=>{const{data:e}=await S.get(w.genres());return e},D=async({page:e=1,genre:t,name:a,sortName:r}={})=>{const{data:s}=await S.get(w.artists(),{params:{page:e,limit:q,...!!t&&{genre:t},...!!a&&{name:a},...!!r&&{sortName:r}}}),i=s.totalArtists||0,o=Math.ceil(i/q),u=e>=o;return{artists:s.artists||[],isLastPage:u,totalItems:i,perPage:q}},X=async e=>{const{data:t}=await S.get(w.artistById(e));return t},J=async e=>{const{data:t}=await S.get(w.artistByIdWithAlbums(e));return t},Q=async e=>{const{data:t}=await S.post(w.feedbacks(),e);return t},Z=async(e=1,t=10)=>{const{data:a}=await S.get(w.feedbacks(),{params:{page:e,limit:t}}),r=a.data||[],s=a.total||0,i=e>=Math.ceil(s/t);return{feedbacks:r,isLastPage:i}},n={artistsList:document.querySelector(".artists-list"),containerEL:document.querySelector(".container"),loader:document.querySelector(".loader"),artistsPagination:document.querySelector("#artists-pagination"),feedbackContainer:document.querySelector(".section-feedback .container"),genreSelect:document.querySelector("#genre-select"),sortSelect:document.querySelector("#sort-select"),searchInput:document.querySelector(".filters-search-input"),searchBtn:document.querySelector(".filters-search-btn"),resetBtn:document.querySelector(".filters-reset-btn"),emptyResetBtn:document.querySelector(".empty-reset-btn"),toggleBtn:document.querySelector(".filters-toggle-btn"),filtersWrapper:document.querySelector(".filters-wrapper"),artistsLoader:document.querySelector(".artists-loader"),modalArtistLoader:document.querySelector(".modal-artist-loader"),headerEl:document.querySelector(".header"),artistsEl:document.querySelector(".section-artists")},k="/project-Dev4L1fe/assets/sprite-BCLXoa-8.svg";function ee(e){localStorage.setItem("theme",e)}function te(){const e=localStorage.getItem("theme");e&&document.body.setAttribute("data-theme",e)}const se=(e="")=>CSS.supports("-webkit-line-clamp","2")&&CSS.supports("display","-webkit-box")?e:e.length>80?e.slice(0,80).trim()+"...":e,f={create(e){if(!e)return;let t=e.querySelector(".loader");return t||(e.insertAdjacentHTML("beforeend",'<span class="loader hidden"></span>'),t=e.querySelector(".loader")),{loaderEl:t,parent:e}},show({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.remove("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="flex",e?.classList.remove("hidden")))},hide({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.add("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="none",e?.classList.add("hidden")))}},re=({page:e,visiblePages:t,itemsPerPage:a,totalItems:r}={})=>({totalItems:r,itemsPerPage:a,page:e,visiblePages:t,centerAlign:!0,usageStatistics:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:({type:s})=>`<a href="#" class="tui-page-btn tui-${s}"><svg class="pagination-${s==="next"?"right":"left"}-icon"><use href="${k}#${s==="next"?"right":"left"}-arrow-icon"></use></svg></a>`,disabledMoveButton:({type:s})=>`<span class="tui-page-btn tui-is-disabled tui-${s}"><svg class="icon-disabled pagination-${s==="next"?"right":"left"}-icon"><use href="${k}#${s==="next"?"right":"left"}-arrow-icon"></use></svg></span>`,moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}),ae=e=>e<768?3:e>=768&&e<1440?4:5,ne=e=>{if(!e||isNaN(e))return"N/A";const t=Math.floor(e/1e3),a=Math.floor(t/60),r=t%60;return`${a}:${r.toString().padStart(2,"0")}`};function x(e){const t=e.el.querySelector(".swiper-button-prev"),a=e.el.querySelector(".swiper-button-next");e.isBeginning?t.classList.add("swiper-button-disabled"):t.classList.remove("swiper-button-disabled"),e.isEnd?a.classList.add("swiper-button-disabled"):a.classList.remove("swiper-button-disabled"),e.slides.length<=e.params.slidesPerView&&(t.classList.add("swiper-button-disabled"),a.classList.add("swiper-button-disabled"))}function ie(){const t=document.body.getAttribute("data-theme")==="dark"?"light":"dark";document.body.setAttribute("data-theme",t),ee(t)}function oe(){window.addEventListener("scroll",()=>{const e=n.headerEl.offsetHeight,t=n.artistsEl.offsetTop;window.scrollY>=t-e?n.headerEl.style.transition="background-color 0.4s ease":n.headerEl.style.transition="none"})}function H(e){n.artistsList.innerHTML=e.map(t=>{const a=t.genres.map(s=>`<li class="genres-list-item">${s}</li>`).join(""),r=se(t.strBiographyEN);return`<li class="artists-list-item" data-id="${t._id}">
        <img class="artist-image" src="${t.strArtistThumb}" alt="${t.strArtist}" />
        <ul class="genres-list">${a}</ul>
        <h3 class="artist-name">${t.strArtist}</h3>
        <p class="artist-descr">${r}</p>
        <button type="button" class="artist-btn-learn-more">
          <span>Learn More</span>
          <span>
            <svg class="artist-learn-svg" width="14" height="14">
              <use href="${k}#next-icon"></use>
            </svg>
          </span>
        </button>
      </li>`}).join("")}const ce=e=>{const t=document.querySelector(".section-feedback .container");if(!t)return console.error("Container not found");const a=`
    <div class="feedback-slider swiper">
      <div class="swiper-wrapper">
        ${e.map(o=>`
          <div class="swiper-slide">
            <div class="feedback-card">
              <div class="stars">${le(o.rating)}</div>
              <p class="comment">"${o.descr}"</p>
              <h3 class="comm-name">${o.name}</h3>
            </div>
          </div>
        `).join("")}
      </div>
      <div class="swiper-button-prev">
        <svg class="icon">
          <use href="${k}#left-arrow-icon"></use>

        </svg>
      </div>
      <div class="swiper-button-next">
        <svg class="icon">
          <use href="${k}#right-arrow-icon"></use>

        </svg>
      </div>
      <div class="custom-pagination">
        <span class="bullet bullet-left"></span>
        <span class="bullet bullet-middle"></span>
        <span class="bullet bullet-right"></span>
      </div>
    </div>
  `;t.insertAdjacentHTML("beforeend",a);const r=t.querySelector(".feedback-slider");if(!r)return console.error("Swiper container not found");const s=new V(r,{spaceBetween:30,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init(o){i(o),x(o)},slideChange(o){i(o),x(o)}}});document.querySelector(".swiper-button-next")?.addEventListener("click",()=>{s.slideNext()}),document.querySelector(".swiper-button-prev")?.addEventListener("click",()=>{s.slidePrev()});function i(o){const u=o.slides.length,c=o.activeIndex,d=o.el.querySelector(".bullet-left"),g=o.el.querySelector(".bullet-middle"),m=o.el.querySelector(".bullet-right");!d||!g||!m||(d.classList.remove("active"),g.classList.remove("active"),m.classList.remove("active"),c===0?d.classList.add("active"):c===u-1?m.classList.add("active"):g.classList.add("active"))}};function le(e){const t=Math.round(e),a=5-t;return'<span class="stars">'+'<span class="fa fa-star checked"></span>'.repeat(t)+'<span class="fa fa-star"></span>'.repeat(a)+"</span>"}async function de(e,t){const a=f.create(n.modalArtistLoader);f.show(a),n.modalArtistLoader.style.display="flex";try{const r=await X(e),s=await J(e),i=Array.isArray(s.albumsList)?s.albumsList.filter(u=>u&&typeof u=="object"):[],o=r.genres?.map(u=>`<span class="genre-chip">${u}</span>`).join("")||"";t.innerHTML=`
      <h2 class="modal-title">${r.strArtist||"Unknown Artist"}</h2>

      <div class="modal-header">
        <img src="${r.strArtistThumb||""}" alt="${r.strArtist}" class="modal-img" />
        <div class="modal-info">
          <div class="modal-info-container">
          <div class="modal-info-group">
            <p><span>Years active</span> ${r.intFormedYear||"N/A"}-${r.intDiedYear||"present"}</p>
            <p><span>Sex</span> ${r.strGender||"N/A"}</p>
            </div>
            <div class="modal-info-group">
            <p><span>Members</span> ${r.intMembers||"N/A"}</p>
            <p><span>Country</span> ${r.strCountry||"N/A"}</p>
            </div>
          </div>
          <div><span>Biography</span><p>${r.strBiographyEN||"N/A"}</p></div>
          <div class="modal-genres">${o}</div>
        </div>
      </div>
      <h3 class="albums-heading">Albums</h3>
<div class="albums-container">
  ${i.length>0?i.map(u=>`
      <div class="album-card">
        <h4 class="album-title">${u.strAlbum||"Unknown Album"}</h4>
        <div class="album-tracks-header">
        <p>Track</p>
        <div class="track-info">
          <p>Time</p>
          <p>Link</p>
        </div>
        </div>
        <ul class="album-tracklist">
          ${u?.tracks?.length?u.tracks.map(c=>`
              <li class="album-track-item">
                <h5>${c.strTrack||"Track"}</h5>
                <div class="track-info">
                  <p>
                    ${ne(c.intDuration)}
                  </p>
                  <a class="track-video-link ${c.movie?"":"track-video-link-hidden"}" 
                      href="${c.movie||"#"}" target="_blank" rel="noopener noreferrer">
                    <svg class="track-video-icon icon-hidden">
                      <use href="${k}#youtube-icon"></use>
                    </svg>
                  </a>
                </div>
              </li>`).join(""):'<li class="album-track-item">No tracks available</li>'}
        </ul>
      </div>
    `).join(""):"<p>No albums found</p>"}
</div>`}catch(r){console.error("Modal render error:",r),t.innerHTML="<p>Error loading artist data</p>"}finally{f.hide(a),n.modalArtistLoader.style.display="none"}}const A=document.getElementById("artist-modal"),_=A.querySelector(".modal-content-container"),ue=document.getElementById("close-modal");async function me(e){A.classList.add("is-open"),document.body.style.overflow="hidden",await de(e,_),document.addEventListener("keydown",j)}function B(){A.classList.remove("is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",j),_.innerHTML=""}function j(e){e.key==="Escape"&&B()}ue?.addEventListener("click",B);A.addEventListener("click",e=>{e.target===A&&B()});async function pe(){async function e(t=1){const a=f.create(n.artistsLoader);f.show(a),n.artistsLoader.style.display="flex";try{const r=await D({page:t});O(r.totalItems,r.perPage),H(r.artists)}catch(r){r.response?L.error({message:`Error ${r.response.status}: ${r.response.data}`}):L.error({message:`Error: ${r.message}`})}finally{f.hide(a),n.artistsLoader.style.display="none"}}await e(1)}async function fe(){const e=f.create(n.feedbackContainer);f.show(e);try{const{feedbacks:t}=await Z(1,10);if(!Array.isArray(t))throw new Error("Feedbacks is not an array");ce(t)}catch(t){console.error("Feedback fetch error:",t)}finally{f.hide(e)}}let p={genre:"",sortName:"",name:"",page:1};async function ge(){await ve(),be()}async function ve(){try{const t=(await K()).map(a=>`<option value="${a.genre}">${a.genre}</option>`).join("");n.genreSelect.innerHTML='<option value="" disabled selected hidden>Genre</option>'+t}catch(e){L.error({message:"Failed to load genres"}),console.error(e)}}function be(){n.genreSelect.addEventListener("change",()=>{p.genre=n.genreSelect.value,p.page=1,h()}),n.sortSelect.addEventListener("change",()=>{const e=n.sortSelect.value;p.sortName=e==="az"?"asc":e==="za"?"desc":"",p.page=1,h()}),n.searchBtn.addEventListener("click",e=>{e.preventDefault(),p.name=n.searchInput.value.trim(),p.page=1,h()}),n.searchInput.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),p.name=n.searchInput.value.trim(),p.page=1,h())}),n.resetBtn.addEventListener("click",()=>{n.genreSelect.value="",n.sortSelect.value="",n.searchInput.value="",p={genre:"",sortName:"",name:"",page:1},h()}),n.emptyResetBtn&&n.emptyResetBtn.addEventListener("click",()=>{n.genreSelect.value="",n.sortSelect.value="",n.searchInput.value="",p={genre:"",sortName:"",name:"",page:1},document.querySelector(".artists-empty-state").classList.add("is-hidden"),h()}),n.toggleBtn&&n.filtersWrapper&&n.toggleBtn.addEventListener("click",()=>{n.filtersWrapper.classList.toggle("is-open");const e=n.toggleBtn.getAttribute("aria-expanded")==="true";n.toggleBtn.setAttribute("aria-expanded",String(!e))})}let F=null;async function h(){const e=f.create(n.artistsLoader);f.show(e);try{const t=await D(p);if(!t||!Array.isArray(t.artists))throw new Error("Invalid API response structure");t.artists.length===0?(n.artistsList.innerHTML="",document.querySelector(".artists-empty-state").classList.remove("is-hidden"),n.artistsPagination.innerHTML=""):(document.querySelector(".artists-empty-state").classList.add("is-hidden"),H(t.artists),O(t.totalItems,t.perPage))}catch{L.error({message:"Failed to load filtered artists"})}finally{f.hide(e),n.artistsLoader.style.display="none",document.querySelector(".artists-subtitle").scrollIntoView({behavior:"smooth"})}}function O(e,t){let a=window.innerWidth;F=new G(n.artistsPagination,re({page:p.page,visiblePages:ae(a),itemsPerPage:t,totalItems:e})),F.on("afterMove",r=>{p.page=r.page,h()})}const ye=()=>{n.artistsList.addEventListener("click",async e=>{const t=e.target.closest(".artist-btn-learn-more");if(t?.nodeName!=="BUTTON")return;const a=t.closest(".artists-list-item")?.dataset?.id;if(!a){L.error({message:"Unable to find this artist. Please try again later."});return}me(a)})},$=document.getElementById("toTop");window.addEventListener("scroll",()=>{window.scrollY>600?$.classList.add("show"):$.classList.remove("show")});$.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const he=document.querySelector(".burger-menu"),R=document.querySelector(".mobile-menu"),Le=document.querySelector(".mobile-menu-close"),M=document.querySelector(".overlay"),Se=document.querySelectorAll(".nav-list-m a");function ke(){R.classList.add("active"),M.classList.add("active"),document.body.classList.add("lock")}function T(){R.classList.remove("active"),M.classList.remove("active"),document.body.classList.remove("lock")}he.addEventListener("click",ke);Le.addEventListener("click",T);M.addEventListener("click",T);Se.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const a=this.getAttribute("href"),r=document.querySelector(a);r&&r.scrollIntoView({behavior:"smooth"}),T()})});function we(e,t={}){const a=t.max??5,r=t.scoreName??"rating";e.innerHTML="",e.classList.add("star-rating");let s=0;const i=document.createElement("input");i.type="hidden",i.name=r,i.value="0",e.appendChild(i);const o=[];for(let c=1;c<=a;c++){const d=document.createElement("button");d.type="button",d.setAttribute("aria-label",`${c} star${c>1?"s":""}`),d.dataset.value=String(c),e.appendChild(d),o.push(d)}function u(c){const d=Math.floor(c);o.forEach((g,m)=>{g.classList.remove("is-on","is-hover"),m<d&&g.classList.add("is-on")})}e.addEventListener("mousemove",c=>{const d=c.target.closest("button");if(!d)return;const g=Number(d.dataset.value);o.forEach(m=>m.classList.remove("is-hover"));for(let m=0;m<g;m++)o[m].classList.add("is-hover")}),e.addEventListener("mouseleave",()=>{o.forEach(c=>c.classList.remove("is-hover")),u(s)}),e.addEventListener("click",c=>{const d=c.target.closest("button");if(!d)return;s=Number(d.dataset.value),i.value=String(s),u(s)}),u(s)}function Ee({name:e,rating:t,descr:a}){const r={},s=(e??"").trim();(s.length<2||s.length>16)&&(r.name="Name must be 2-16 characters.");const i=Number(t);(!Number.isFinite(i)||i<1||i>5)&&(r.rating="Rating must be between 1 and 5.");const o=(a??"").trim();return(o.length<10||o.length>512)&&(r.descr="Message must be 10-512 characters."),r}function C(){const e=document.getElementById("feedback-modal");if(!e)return;const t=e.querySelector(".modal__close"),a=e.querySelector(".modal__backdrop"),r=e.querySelector("#fb-name"),s=e.querySelector(".modal__form"),i=e.querySelector("#star-rating"),o='#open-modal, [data-open="feedback-modal"]';let u=!1;const c=()=>{s.querySelectorAll(".form-error").forEach(l=>l.remove()),s.querySelectorAll(".field-invalid").forEach(l=>l.classList.remove("field-invalid")),s.querySelectorAll('[aria-invalid="true"]').forEach(l=>l.removeAttribute("aria-invalid"))},d=(l,b)=>{l?.classList?.add("field-invalid"),l?.insertAdjacentHTML("beforeend",`<div class="form-error">${b}</div>`)},g=()=>document.body.style.overflow="hidden",m=()=>document.body.style.overflow="auto",U=()=>{e.classList.add("active"),g(),setTimeout(()=>r?.focus(),0),!u&&i&&(we(i,{max:5}),u=!0)},W=()=>{if(!i)return;const l=i.querySelector('input[name="rating"]');l&&(l.value="0"),i.querySelectorAll("button").forEach(b=>b.classList.remove("is-on","is-half","is-hover","is-hover-half"))},E=()=>{e.classList.remove("active"),m()};document.addEventListener("click",l=>{l.target.closest(o)&&(l.preventDefault(),U())}),t?.addEventListener("click",E),a?.addEventListener("click",E),document.addEventListener("keydown",l=>{l.key==="Escape"&&e.classList.contains("active")&&E()}),t&&!("disabled"in t)&&(t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),E())})),s?.addEventListener("submit",async l=>{l.preventDefault();const b=new FormData(s),I={name:(b.get("name")||"").toString().trim(),rating:Number(i?.querySelector('input[name="rating"]')?.value||"0"),descr:(b.get("message")||"").toString().trim()};c();const y=Ee(I);if(Object.keys(y).length){if(y.name){const v=s.querySelector(".form__group_1");v?.querySelector("input")?.setAttribute("aria-invalid","true"),d(v,y.name)}if(y.descr){const v=s.querySelector(".form__group_2");v?.querySelector("textarea")?.setAttribute("aria-invalid","true"),d(v,y.descr)}y.rating&&i?.insertAdjacentHTML("afterend",`<div class="form-error">${y.rating}</div>`);return}const N=s.querySelector(".fb-modal-btn");N?.setAttribute("disabled","true");try{await Q(I),L.success({title:"Success",message:"Thank you for your feedback!",position:"topRight"}),s.reset(),W(),c(),E()}catch(v){const P=v?.response?.data?.message||v?.message||"Something went wrong. Try again.";L.error({title:"Error",message:P,position:"topRight"}),s.insertAdjacentHTML("afterbegin",`<div class="form-error">${P}</div>`)}finally{N?.removeAttribute("disabled")}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C();te();oe();pe();fe();ge();ye();document.querySelectorAll(".theme-toggle").forEach(e=>{e.addEventListener("click",ie)});
//# sourceMappingURL=index.js.map
